<%= turbo_frame_tag 'modal-content' do %>
  <div class="w-full max-w-md mx-auto">

    <!-- ▼ 上部ナビ -->
    <div class="flex items-center justify-between mb-4">
      <%= link_to calendar_path(@date.prev_day.to_s),
                  data: { turbo_frame: "modal" },
                  class: "btn btn-sm btn-ghost" do %>←<% end %>

      <h2 class="text-xl font-bold text-center flex-1">
        <%= l(@date, format: :long) %>（<%= %w(日 月 火 水 木 金 土)[@date.wday] %>）
      </h2>

      <%= link_to calendar_path(@date.next_day.to_s),
                  data: { turbo_frame: "modal" },
                  class: "btn btn-sm btn-ghost" do %>→<% end %>
    </div>

    <!-- ▼ 本文（スクロール可能領域） -->
    <div class="space-y-6 mt-4 pb-16">
      <div class="space-y-3">

        <h3 class="text-lg font-semibold mb-2">行動ログ</h3>
        <% if @habit_logs.any? %>
          <div class="space-y-3">
            <% @habit_logs.each do |log| %>
              <%= render "calendars/partials/card_habit_log_logs", habit_log: log %>
            <% end %>
          </div>
        <% else %>
          <p class="text-base-content/60">この日の行動ログはありません</p>
        <% end %>

        <h3 class="text-lg font-semibold mt-6 mb-2">気分ログ</h3>
        <% if @mood_logs.any? %>
          <div class="space-y-3">
            <% @mood_logs.each do |log| %>
              <%= render "calendars/partials/card_mood_log_logs", mood_log: log %>
            <% end %>
          </div>
        <% else %>
          <p class="text-base-content/60">この日の気分ログはありません</p>
        <% end %>

      </div>
    </div>

  </div>
<% end %>

<!-- ▼ モーダル固定閉じるボタン（frame の外）-->
<div class="fixed bottom-4 left-4 right-4 z-50">
  <div class="flex justify-between items-center max-w-md mx-auto">

    <!-- 左：閉じる -->
    <button type="button"
            data-action="click->modal#close"
            class="btn btn-sm btn-outline h-9 min-h-9 px-4 shadow-lg">
      閉じる
    </button>

    <!-- 右：振り返り -->
    <%= link_to "この日を振り返る",
                reaction_path(date: @date),
                data: { turbo_frame: "_top" },
                class: "btn btn-primary btn-sm h-9 min-h-9 px-4 shadow-lg" %>

  </div>
</div>
