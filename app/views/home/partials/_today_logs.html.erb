<section class="card bg-base-100 shadow-sm" data-controller="swiper">
  <div class="card-body">
    <div class="flex flex-wrap items-center justify-between gap-3">
      <h2 class="card-title text-sm font-semibold">今日のログ</h2>

      <div class="tabs tabs-boxed bg-base-200 p-1 rounded-lg">
        <button
          type="button"
          class="tab tab-sm tab-active"
          data-index="0"
          data-swiper-target="tab"
          data-action="click->swiper#slideTo"
        >
          気分
        </button>
        <button
          type="button"
          class="tab tab-sm"
          data-index="1"
          data-swiper-target="tab"
          data-action="click->swiper#slideTo"
        >
          習慣
        </button>
      </div>
    </div>

    <div class="swiper w-full mt-4" data-swiper-target="container">
      <div class="swiper-wrapper">

        <!-- 気分ログ -->
        <div class="swiper-slide">
          <% if @mood_logs_today.present? %>
            <div class="space-y-2">
              <% @mood_logs_today.each do |log| %>
                <% mood = log.mood %>
                <div class="flex items-center justify-start gap-2 w-full">

                  <!-- 左：時刻 -->
                  <p class="text-xs text-base-content/70 w-10 text-center">
                    <%= log.recorded_at.strftime("%H:%M") %>
                  </p>

                  <!-- 中央：気分カード -->
                  <div class="w-[90%] flex items-center justify-between rounded-xl bg-base-200 p-3 shadow-sm">
                    <div class="flex items-center gap-3">
                      <% if (emoji = emoji_for_mood(mood)).present? %>
                        <span class="text-xl"><%= emoji %></span>
                      <% end %>
                      <div>
                        <p class="text-sm font-medium leading-none">
                          <%= "気分：#{jp_label_for_mood(mood)}" %>
                        </p>
                        <p class="text-xs text-base-content/60 mt-1">
                          <%= "感情：#{log.feeling&.name.presence || 'なし'}" %>
                        </p>
                      </div>
                    </div>

                    <%= link_to "詳細",
                                mood_log_path(log),
                                class: "btn btn-outline btn-xs",
                                data: { turbo_frame: "modal" } %>
                  </div>

                </div>
              <% end %>
            </div>
          <% else %>
            <div class="rounded-lg bg-base-200 py-6 text-center text-sm text-base-content/60">
              今日の気分ログはまだありません。
            </div>
          <% end %>
        </div>

        <!-- 習慣ログ -->
        <div class="swiper-slide">
          <div class="space-y-2">
            <% habits = [
              { title: "朝のコーヒー", time: "7:30" },
              { title: "通勤", time: "8:00" },
              { title: "読書20分", time: "22:00" }
            ] %>

            <% habits.each do |habit| %>
              <div class="flex items-center justify-between rounded-lg bg-base-200 p-3">
                <div>
                  <p class="text-sm font-medium"><%= habit[:title] %></p>
                  <p class="text-xs opacity-70"><%= habit[:time] %></p>
                </div>
                <%= heroicon "check-circle", options: { class: "h-4 w-4 text-success" } %>
              </div>
            <% end %>
          </div>
        </div>

      </div>

      <!-- ページネーション -->
      <div class="swiper-pagination"></div>
    </div>
  </div>
</section>
