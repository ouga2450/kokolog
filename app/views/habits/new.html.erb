<div class="max-w-lg mx-auto mt-6">
  <div class="card bg-base-100 shadow-md">
    <div class="card-body space-y-4">

      <h2 class="card-title text-lg font-semibold">
        習慣を追加する
      </h2>

      <%= form_with model: @habit_form,
                    url: habits_path,
                    method: :post,
                    local: true do |f| %>

        <!-- 習慣名 -->
        <div class="form-control">
          <%= f.label :name, "習慣名", class: "label-text font-semibold" %>
          <%= f.text_field :name,
                           class: "input input-bordered w-full" %>
        </div>

        <!-- 説明 -->
        <div class="form-control">
          <%= f.label :description, "説明", class: "label-text font-semibold" %>
          <%= f.text_area :description,
                          rows: 3,
                          class: "textarea textarea-bordered w-full" %>
        </div>

        <!-- カテゴリ -->
        <div class="form-control">
          <%= f.label :category_id, "カテゴリ", class: "label-text font-semibold" %>

          <%= f.select :category_id,
                options_from_collection_for_select(
                  Category.all,
                  :id,
                  ->(c) { "#{c.icon} #{c.name}" },
                  @habit_form.category_id
                ),
                { prompt: "選択してください" },
                { class: "select select-bordered w-full" }
          %>
        </div>

        <hr class="my-4">

        <!-- Goal 設定 -->
        <h3 class="font-semibold text-base">目標設定</h3>

        <!-- 目標タイプ -->
        <div class="form-control">
          <%= f.label :goal_type, "目標タイプ", class: "label-text font-semibold" %>
          <%= f.select :goal_type,
            Goal.goal_types.keys.map { |k| [k.humanize, k] },
            { prompt: "選択してください" },
            class: "select select-bordered w-full" %>
        </div>

        <!-- ターゲット種別 -->
        <div class="form-control">
          <%= f.label :target_type, "ターゲット種別", class: "label-text font-semibold" %>
          <%= f.select :target_type,
            Goal.target_types.keys.map { |k| [k.humanize, k] },
            { prompt: "選択してください" },
            class: "select select-bordered w-full" %>
        </div>

        <!-- ターゲット値 -->
        <div class="form-control">
          <%= f.label :target_value, "目標値(半角数字)", class: "label-text font-semibold" %>
          <%= f.number_field :target_value,
                             class: "input input-bordered w-full",
                             min: 1 %>
        </div>

        <!-- 期間 -->
        <h3 class="font-semibold text-base">期間設定</h3>
        <div class="grid grid-cols-2 gap-4">
          <div class="form-control">
            <%= f.label :start_date, "開始日", class: "label-text font-semibold" %>
            <%= f.date_field :start_date,
                             class: "input input-bordered w-full" %>
          </div>

          <div class="form-control">
            <%= f.label :end_date, "終了日", class: "label-text font-semibold" %>
            <%= f.date_field :end_date,
                             class: "input input-bordered w-full" %>
          </div>
        </div>

        <!-- 送信 -->
        <div class="form-control mt-6">
          <%= f.submit "登録する", class: "btn btn-primary w-full" %>
        </div>

      <% end %>

    </div>
  </div>
</div>
